package cc.slack.features.modules.impl.exploit.disablers.others;

import cc.slack.start.Slack;
import cc.slack.events.impl.network.PacketEvent;
import cc.slack.events.impl.player.UpdateEvent;
import cc.slack.features.modules.impl.exploit.disablers.IDisabler;
import cc.slack.features.modules.impl.movement.Speed;
import cc.slack.utils.network.PacketUtil;
import cc.slack.utils.other.PrintUtil;

import net.minecraft.network.play.client.C0BPacketEntityAction;
import net.minecraft.network.play.client.C0CPacketInput;

import static java.lang.Float.NaN;

public class RidingDisabler implements IDisabler {

    boolean BYPASSED = false;

    @Override
    public void onEnable() {
        BYPASSED = false;
    }

    @Override
    public void onUpdate(UpdateEvent event) {
            PacketUtil.sendNoEvent(new C0CPacketInput(NaN,NaN,false, true));
    }

    @Override
    public void onPacket(PacketEvent event) {
        if (event.getPacket() instanceof C0BPacketEntityAction && Slack.getInstance().getModuleManager().getInstance(Speed.class).isToggle()) {
            PacketUtil.sendNoEvent(new C0BPacketEntityAction(mc.thePlayer, C0BPacketEntityAction.Action.START_SNEAKING));
            if (mc.thePlayer.ticksExisted % 100 == 0) {
                PrintUtil.message("Webos de Encrypte");
            }
        }
    }

    @Override
    public void onDisable() {
        BYPASSED = false;
    }

    @Override
    public String toString() {
        return "Riding";
    }
}
